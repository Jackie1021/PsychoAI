# Profile Page 快速使用指南

## 🚀 快速开始

### 启动应用
```bash
# 启动后端服务
./START_BACKEND.sh

# 启动 Flutter（新终端）
flutter run -d chrome
```

## 📱 核心功能使用

### 1️⃣ 管理个人帖子

#### 查看我的帖子
- 进入个人主页，默认显示"My Posts"
- 支持瀑布流浏览所有个人发布的帖子

#### 编辑帖子
**方式1：长按帖子**
1. 长按任意帖子
2. 点击"Edit Post"
3. 修改内容或可见性
4. 点击"Save"保存

**方式2：点击详情页**
1. 点击帖子进入详情
2. 点击右上角菜单
3. 选择"Edit"

#### 删除帖子
1. 长按帖子
2. 点击"Delete"
3. 确认删除操作
4. 帖子立即从列表移除

#### 设置帖子可见性
- **公开**：所有人可见
- **私密**：仅自己可见（显示锁图标🔒）

### 2️⃣ 查看收藏和点赞

#### 切换内容视图
点击顶部三个按钮：
- **My Posts**：我发布的所有帖子
- **Liked**：我点赞的帖子
- **Saved**：我收藏的帖子

每个视图都有独立的数据加载和空状态提示。

### 3️⃣ Match 精选展示

#### 查看 Match Highlights
- 在个人主页向下滚动
- 查看"Match Highlights"区域
- 横向滑动浏览最近5个高质量匹配

#### Match 卡片信息
每个 Match 卡片显示：
- **头像**：匹配对象的头像
- **用户名**：匹配对象的昵称
- **匹配度**：百分比评分（带颜色编码）
  - 🟢 绿色：80%+ 高度匹配
  - 🔵 蓝色：60-79% 良好匹配
  - 🟠 橙色：40-59% 一般匹配
  - ⚪ 灰色：<40% 低匹配
- **状态图标**：
  - 💬 已聊天
  - ⏭️ 已跳过
  - ⏳ 待行动

#### 查看完整报告
点击"View All"按钮进入 Yearly Report Page。

### 4️⃣ 个人资料管理

#### 编辑个人资料
**方式1：点击头像**
1. 点击个人页面的头像（右下角有编辑图标）
2. 进入编辑页面

**方式2：点击按钮**
1. 滚动到统计卡片下方
2. 点击"Edit Profile"按钮

#### 查看资料卡
1. 点击顶部工具栏的"资料卡"图标（💳）
2. 查看自己的 Profile Card（其他人看到的样子）
3. 点击"Edit"可直接编辑

#### 个人统计
查看以下数据：
- **Posts**：发布的帖子总数
- **Likes**：点赞的帖子数量
- **Favorites**：收藏的帖子数量
- **Followers**：关注者数量
- **Following**：关注的人数量

### 5️⃣ 刷新数据

#### 手动刷新
**方式1：点击刷新按钮**
- 点击顶部工具栏的刷新图标

**方式2：下拉刷新**
- 在页面顶部向下拉动
- 松手后自动刷新

#### 自动刷新
以下操作后自动刷新：
- 编辑帖子后
- 删除帖子后
- 编辑个人资料后

## 🎨 UI 交互说明

### 手势操作
| 操作 | 效果 |
|------|------|
| **点击帖子** | 进入帖子详情页 |
| **长按帖子** | 显示操作菜单（编辑/删除/分享） |
| **点击头像** | 进入编辑资料页面 |
| **点击Match卡片** | 进入Match历史页面 |
| **下拉页面** | 刷新所有数据 |

### 视觉反馈
- ✅ **操作成功**：底部显示绿色提示条
- ❌ **操作失败**：底部显示红色错误提示
- 🔄 **加载中**：显示圆形进度指示器
- 📭 **空状态**：显示友好的空状态图标和文案

## 📊 数据同步机制

### 实时更新场景
1. **编辑帖子**：
   - 更新成功后，自动重新加载当前 Section 的数据
   - 私密状态变化立即反映在卡片上

2. **删除帖子**：
   - 立即从列表移除，无需重新加载
   - 帖子计数自动减1

3. **切换Section**：
   - 首次切换时加载数据
   - 已加载的数据会被缓存

## 🔒 隐私和权限

### 私密帖子
- 带有🔒锁图标的帖子仅自己可见
- 在公共帖子流中不会显示
- 可以随时在编辑页面切换可见性

### Profile Card 浏览
- 查看自己的资料卡不消耗配额
- 可以预览其他人看到的样子
- 支持快速跳转编辑

## ⚠️ 常见问题

### Q1: 为什么点赞/收藏列表是空的？
**A:** 需要先在 Post Page 点赞或收藏帖子，然后才会显示在这里。

### Q2: 为什么没有 Match Highlights？
**A:** 需要先在 Match 页面进行匹配，系统会自动展示最近的高质量匹配。

### Q3: 删除帖子后可以恢复吗？
**A:** 目前不支持，删除操作不可逆，请谨慎操作。

### Q4: 私密帖子别人能看到吗？
**A:** 不能。私密帖子仅在个人主页的"My Posts"中可见，不会出现在公共流中。

### Q5: 刷新后数据没变化？
**A:** 可能是缓存问题，尝试：
1. 点击顶部刷新按钮
2. 或下拉刷新页面
3. 或重新进入页面

## 🎯 使用技巧

### 技巧1：快速批量管理
- 使用"My Posts"视图查看所有帖子
- 长按需要管理的帖子
- 快速编辑或删除

### 技巧2：收藏精选内容
- 在浏览时点击收藏按钮
- 在"Saved"视图中集中查看
- 便于后续回顾和分享

### 技巧3：关注Match趋势
- 定期查看"Match Highlights"
- 对比不同时期的匹配度
- 点击"View All"查看详细报告

### 技巧4：优化个人展示
1. 定期更新个人资料
2. 精选最佳帖子设为公开
3. 私密帖子用于草稿或个人记录

## 🛠️ 开发者信息

### 关键组件
```dart
ProfilePage              // 主页面
  ├── _buildProfileHeader()      // 个人信息头部
  ├── _buildMatchHighlights()    // Match精选区域
  ├── _buildSectionSelector()    // Section切换按钮
  └── _buildContentSection()     // 内容区域
      └── _PostCard()            // 帖子卡片
```

### 数据流
```
API Service
  ↓
ProfilePage State
  ↓
UI Components
  ↓
User Interactions
  ↓
API Calls
  ↓
State Update
```

### 相关文件
- `lib/pages/profile_page.dart` - 主页面
- `lib/pages/edit_post_page.dart` - 编辑帖子
- `lib/pages/profile_card_page.dart` - 资料卡
- `lib/models/post.dart` - 帖子数据模型
- `lib/models/match_record.dart` - Match记录模型

## 📚 相关文档
- [完整功能文档](PROFILE_ENHANCEMENT_COMPLETE.md)
- [Match报告指南](MATCH_REPORT_USER_GUIDE.md)
- [资料卡快速指南](PROFILE_CARD_QUICKSTART.md)

---

**版本**：v1.0  
**更新日期**：2025-11-17  
**维护者**：开发团队
