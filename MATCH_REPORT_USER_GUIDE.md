# Match Report System - User Guide

## 🚀 快速开始

### 1. 启动应用

```bash
# 启动后端服务
./START_BACKEND.sh

# 启动Flutter应用
flutter run -d chrome
```

### 2. 生成Match记录

1. 登录应用
2. 进入特征选择页面，填写个人特征
3. 点击"开始匹配"按钮
4. **自动保存**: 所有匹配结果会自动保存到你的历史记录中

---

## 📊 查看Match报告

### 方式1: 从个人资料页进入

1. 进入 **Profile Page** (个人资料页)
2. 点击右上角的 **时间线图标** (📊 Timeline icon)
3. 进入 **Yearly Report Page**

### 方式2: 从导航菜单进入

- 直接导航到 `YearlyReportPage`

---

## 🎯 功能使用指南

### A. 年度报告页 (Yearly Report Page)

#### 时间区间选择
- **1个月**: 查看最近30天的匹配数据
- **3个月**: 查看最近3个月的匹配数据（默认）
- **半年**: 查看最近6个月的匹配数据
- **全部**: 查看所有历史匹配数据

点击不同按钮即可切换时间范围，报告会自动重新生成。

#### 统计概览
显示4个核心指标：
- **总匹配数**: 该时间段内的总匹配次数
- **已聊天**: 你已经开始聊天的匹配数
- **平均兼容性**: 所有匹配的平均兼容性分数
- **最高分**: 你获得的最高兼容性分数

#### 操作按钮

**"查看历史" 按钮**
- 进入Match历史列表页
- 查看所有匹配记录的详细信息

**"AI分析" 按钮**
- 获取AI对你匹配模式的深度分析
- 包含个性化建议和洞察

#### 特征分析
显示你最常匹配的5个特征：
- 特征名称
- 匹配次数
- 平均得分（进度条显示）

#### Top Matches
显示兼容性最高的前3个匹配：
- 用户头像和用户名
- 匹配原因
- 兼容性百分比

---

### B. 匹配历史页 (Match History Page)

#### 查看历史记录

每条记录显示：
- **用户头像**: 匹配对象的头像（或首字母）
- **用户名**: 匹配对象的用户名
- **行为徽章**: 
  - 🟢 **已聊天**: 你已经和这个人开始聊天
  - ⚪ **已跳过**: 你选择跳过这个匹配
  - 🟠 **未操作**: 还没有采取任何行动
- **匹配摘要**: AI生成的一句话总结
- **兼容性分数**: 百分比显示
- **时间**: 相对时间（如"2天前"、"3小时前"）

#### 筛选功能

点击右上角的 **筛选图标** (🔍) 可以按行为状态筛选：
- **全部**: 显示所有匹配
- **已聊天**: 只显示已开始聊天的
- **已跳过**: 只显示已跳过的
- **未操作**: 只显示未操作的

#### 查看详情

点击任意记录卡片，进入 **Match Analysis Page**：
- 查看完整的匹配分析
- 查看详细的特征分数
- 可以开始聊天（如果还没开始）

---

### C. AI分析页 (AI Analysis Page)

#### 生成AI分析

1. 从年度报告页点击 **"AI分析"** 按钮
2. 等待AI生成分析（约2-5秒）
3. 查看完整的匹配画像报告

#### AI分析内容

**你的匹配画像**
- AI根据你的匹配数据生成的深度分析
- 包含：
  - 匹配偏好总结
  - 显著的性格特征
  - 匹配模式的优势
  - 个性化交友建议

**小贴士卡片**
- 说明分析基于的数据范围
- 提示数据积累的重要性

#### 重新生成

点击右上角的 **刷新图标** (🔄) 可以：
- 重新生成AI分析
- 获取新的洞察视角

---

## 🎨 UI元素说明

### 颜色语义

- **酒红色 (#992121)**: 主要强调色，按钮、进度条
- **绿色**: 成功状态（已聊天）
- **灰色**: 中性状态（已跳过）
- **橙色**: 待处理状态（未操作）
- **米色背景 (#E2E0DE)**: 温暖舒适的应用背景

### 图标含义

- 📊 **Timeline**: 查看报告
- 📖 **History**: 查看历史
- 🧠 **Psychology**: AI分析
- 💬 **Chat**: 已聊天
- ⏭️ **Skip**: 已跳过
- ⏰ **Schedule**: 未操作
- 🔄 **Refresh**: 重新加载/生成

---

## 📱 使用场景示例

### 场景1: 查看本月的匹配表现

1. 进入 **Yearly Report Page**
2. 选择 **"1个月"** 时间范围
3. 查看统计概览，了解本月匹配情况
4. 查看Top Matches，重新联系高匹配度的人

### 场景2: 回顾某个特定的匹配

1. 进入 **Match History Page**
2. 滚动查找或使用筛选功能
3. 点击记录卡片查看完整分析
4. 从详情页开始聊天

### 场景3: 获取AI建议改进匹配

1. 进入 **Yearly Report Page**
2. 选择 **"3个月"** 或 **"半年"** 获取足够数据
3. 点击 **"AI分析"** 按钮
4. 阅读AI的建议和洞察
5. 根据建议调整你的特征或匹配策略

### 场景4: 跟踪已聊天的人

1. 进入 **Match History Page**
2. 点击筛选，选择 **"已聊天"**
3. 查看所有你已经开始对话的匹配
4. 点击进入详情，继续聊天

---

## 🔧 故障排除

### 问题1: 报告显示空数据

**原因**: 选择的时间范围内没有匹配记录

**解决**: 
- 尝试选择更长的时间范围（如"全部"）
- 确认你已经生成过匹配
- 检查是否有网络连接问题

### 问题2: AI分析失败

**原因**: 后端服务未启动或网络问题

**解决**:
- 确认后端服务正在运行 (`./START_BACKEND.sh`)
- 检查控制台错误日志
- 系统会自动显示fallback文本

### 问题3: 历史记录未保存

**原因**: Match结果生成时出现错误

**解决**:
- 查看控制台日志确认保存状态
- 检查Firestore安全规则是否正确部署
- 确认用户已登录

### 问题4: 页面加载缓慢

**原因**: 数据量过大或网络延迟

**解决**:
- 选择较短的时间范围（如"1个月"）
- 检查网络连接
- 清除浏览器缓存

---

## 💡 使用技巧

### 技巧1: 定期查看报告
- 建议每月查看一次年度报告
- 了解自己的匹配趋势和偏好变化

### 技巧2: 利用筛选功能
- 使用"未操作"筛选，找出被遗忘的高质量匹配
- 使用"已聊天"筛选，回顾有潜力的对话

### 技巧3: 参考AI建议
- AI分析基于你的历史数据
- 数据越多，分析越准确
- 定期重新生成分析以获取新洞察

### 技巧4: 关注Top Matches
- Top Matches是你最有可能成功的匹配
- 如果还没开始聊天，考虑主动联系

### 技巧5: 跟踪匹配进展
- 通过行为徽章快速了解每个匹配的状态
- 时间戳帮助你记住匹配的新鲜度

---

## 🔒 隐私说明

- **数据所有权**: 你的匹配记录只有你自己可以查看
- **数据安全**: 所有数据存储在Firestore，受安全规则保护
- **数据删除**: 目前不支持删除历史记录（防止误操作）
- **AI隐私**: AI分析不会保存原始匹配数据，只保存生成的文本

---

## 📞 需要帮助？

如果遇到问题：
1. 查看控制台日志
2. 查看 `IMPLEMENTATION_STATUS.md` 了解技术细节
3. 查看 `MATCH_REPORT_DESIGN.md` 了解设计方案

---

## 🎉 享受你的匹配之旅！

这个系统旨在帮助你：
- 📊 了解你的匹配模式
- 🎯 找到最佳匹配
- 💡 获得个性化建议
- 📈 跟踪进展和趋势

保持真诚，保持开放，你会找到真正契合的人！ 💕
